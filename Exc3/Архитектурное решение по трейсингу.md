##Слабые места системы
Не очень пониманию вопрос. Везде, где формируется, передается и сохраняется заказ, с ним могут произойти проблемы. В любом из сервисов и в любой связи между ними.
Соответственно, нужно мониторить содержимое сущности заказа (состав, цена, статус) во всех местах, где происходят изменения с ним, а также временные метрики. Мы же не понимаем какие процессы происходят с заказом в момент работы с ним, не видим кода. Может там при сохранении заказа ошибка при указании в какую таблицу сохранять и сохранение происходит через раз, если нет конфликта по id, например.

Ну если рассматривать вопрос в контексте того, что пользователи не получают заказы, а производство не загружено, то заказы пропадают на этапе между INITIATED и MANUFACTURING_STARTED, что опять же затрагивает все системы. То есть нужно трейсить всю логику и данные между этими этапами.  

##Мотивация

Метрики, на которые может повлиять внедрение трейсинга:
1. Время выполнения того или иного запроса. Отслеживая эту метрику можно найти узкие места системы (например, время выполнения запроса в БД).
2. Количество отказов. Трейсинг поможет проанализировать ошибки, понять стек вызова и найти источник.   
3. Качество работы. Трейсинг поможет увидеть скрытые некритичные ошибки или исключения, которые падают при выполнении кода, не влияя на основной функционал, но при этом, например, загружая ресурсы системы.
4. Безопасность. Используя трейсинг можно выявить потенциально опасные запросы, которые являются следствием либо атак злоумышленников, либо безолаберности разработчиков.

##Предлагаемое решение

Для трейсинга добавляем Jaeger в сервисы Shop API, CRM API и MES API. Через docker добавляем приложение Jaeger (сервис и UI интерфейс), в исследуемых сервисах, подключаем библиотеки и внедряем код для трассировки.

https://drive.google.com/file/d/1N119P24I64wg1-cUqC5MIYLmIm1Vfl0P/view?usp=drive_link

##Компромиссы

1. В первую очередь сложно оценить эффективность метрик в первом приближении, потому что наша приоритетная задача - это выяснить, куда пропадают заказы. Мы можем предполагать о том, какие метрики будут эффективными, но возможно, для этого понадобится несколько итераций.
2. Да, проприетарные системы могут потребовать дополнительных вложений. В нашем случае мы ничего не знаем об архитектуре и бизнес-логике реализации самих сервисов.    
3. Добавление такого рода систем всегда откладывают на второй план, особенно в системах, где команда занимается "тушением пожаров" чаще, чем инновациями или даже must have технологиями. Тут нужна будет готовность бизнеса инвестировать в это время команды разработки.
4. Мы ничего не знаем об уровне квалификации самой команды. Насколько команда готова в обозримые сроки освоить новый сервис.
5. Мы исходим из предположения, что трейсинг поможет нам решить проблему. К сожалению, бывает так, что иногда классические способы получить дебаг работы системы не приносит ожидаемого результата и ошибка кроется где-то ещё, там где мы ее не ищем. 
6. Часто бывает так, что внедрение новой системы не приносит желаемого результата потому что мозг "ездит по старым рельсам". "Внедрить" и "пользоваться" - разные процессы.

##Аспекты безопасности

- доступ к системам трейсинга только из списка доверенных адресов (или VPN)
- ограничение круга лиц, имеющих доступ к данным трейсинга
- защищенные протоколы доступа (HTTPS, SSH)
